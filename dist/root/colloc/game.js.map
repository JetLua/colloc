{"version":3,"sources":["webpack://zero/./src/colloc/app.ts","webpack://zero/./src/colloc/module/enum.ts","webpack://zero/./src/colloc/module/index.ts","webpack://zero/./src/colloc/module/menu.ts","webpack://zero/./src/colloc/scene/entry.ts","webpack://zero/./src/colloc/scene/game.ts","webpack://zero/./src/colloc/scene/preload.ts","webpack://zero/./src/colloc/scene/selector.ts"],"names":["preload","stack","monitor","name","cursor","game","entry","selector","length","hide","args","show","push","on","pop","Design","Math","min","screen","Color","PIXI","utils","EventEmitter","width","height","colors","items","menu","init","Graphics","beginFill","drawRect","endFill","interactive","pivot","set","scale","forEach","id","i","item","Sprite","from","x","y","addChild","opts","visible","update","parent","level","store","j","active","texture","Texture","setPosition","position","cb","scene","Container","stage","target","s","createPromise","promise","resolve","loader","add","load","r","grid","txt","Text","fontFamily","window","font","fontSize","fill","Blue","dot","WHITE","anchor","grade","children","ok","text"],"mappings":"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","file":"colloc/game.js","sourcesContent":["import {monitor} from './module'\nimport {preload, game, entry, selector} from './scene'\n\n\nawait preload()\n\n\nconst stack: {cursor: IScene, args: any[]}[] = []\n\nmonitor.on('scene:go', (name: string, ...args: any[]) => {\n  const cursor: IScene = {game, entry, selector}[name]\n  stack[stack.length - 1]?.cursor.hide()\n  cursor.show(...args)\n  stack.push({cursor, args})\n}).on('scene:back', () => {\n  if (stack.length < 2) return monitor.emit('scene:go', 'entry')\n  stack.pop().cursor.hide()\n  const {cursor, args} = stack[stack.length - 1]\n  cursor.show(...args)\n})\n\nmonitor.emit('scene:go', 'entry')\n","import {screen} from '~/core'\n\n/** 设计尺寸 */\nexport enum Design {\n  Width = 750,\n  Height = 1334,\n  Scale = Math.min(screen.width / 750, screen.height  / 1334)\n}\n\nexport enum Color {\n  Blue = 0x41a8f5,\n  Pink = 0xf75897,\n  Yellow = 0xfad388\n}\n","export * from './enum'\nexport * as menu from './menu'\n\nexport const monitor = new PIXI.utils.EventEmitter()\n","import {store} from '~/util'\nimport {Design} from './enum'\n\nconst width = 150\nconst height = 690\n\nconst colors = ['blue', 'pink', 'yellow', 'setting']\nconst items: PIXI.Sprite[] = []\nlet menu: PIXI.Graphics\n\nfunction init() {\n  menu = new PIXI.Graphics()\n    .beginFill(0xffcc33, 0)\n    .drawRect(0, 0, width, height)\n    .endFill()\n\n  menu.interactive = true\n  menu.pivot.set(width / 2, height / 2)\n  menu.scale.set(Design.Scale)\n\n\n  colors.forEach((id, i) => {\n    const item = PIXI.Sprite.from(`ui.circle.${id}.png`)\n    item.x = 75\n    item.name = id\n    item.y = i * 180 + 75\n    item.interactive = true\n    items.push(item)\n    menu.addChild(item)\n  })\n}\n\nexport function show(opts?: {parent: PIXI.Container}) {\n  !menu && init()\n  if (!opts) return menu.visible = true\n  update()\n  if (menu.parent) return\n  opts.parent.addChild(menu)\n}\n\nexport function update() {\n  const {colloc: {level}} = store\n  const j = level % 25\n  items.forEach((item, i) => {\n    if (i > 2) return\n    const active = i <= j\n    item.interactive = active\n    item.texture = PIXI.Texture.from(`ui.circle.${active ? colors[i] : 'lock'}.png`)\n  })\n}\n\nexport function setPosition(x: number, y?: number) {\n  menu.position.set(x, y)\n}\n\nexport function on(name: string, cb: (e: IEvent) => void) {\n  menu.on(name, cb)\n}\n","import {stage, screen} from '~/core'\nimport {store} from '~/util'\n\nimport {menu, monitor} from '../module'\n\nlet scene: PIXI.Container\n\nfunction init() {\n  scene = new PIXI.Container()\n  stage.addChild(scene)\n  menu.show({parent: scene})\n  menu.setPosition(screen.width / 2, screen.height / 2)\n  menu.on('pointerdown', ({target}: IEvent) => {\n    switch (target.name) {\n      case 'blue': {\n        monitor.emit('scene:go', 'selector')\n        break\n      }\n    }\n  })\n}\n\nexport function show() {\n  if (scene) return scene.visible = true\n  init()\n}\n\nexport function hide() {\n  scene.visible = false\n}\n","import {stage} from '~/core'\n\n\nexport function show() {\n  const s = PIXI.Sprite.from('ui.circle.blue.png')\n  stage.addChild(s)\n}\n\nexport function hide() {\n\n}\n","import {loader} from '~/core'\nimport {createPromise} from '~/util'\n\nexport default function() {\n  const [promise, resolve] = createPromise()\n\n  loader\n    .reset()\n    .add('colloc/static/texture/ui.json')\n    .add('colloc/static/texture/item.json')\n    .load(resolve)\n\n  return promise\n}\n","import {stage, screen} from '~/core'\nimport {store} from '~/util'\nimport {Color} from '../module'\n\nconst width = 500\nconst height = 500\nconst r = 100\n\nlet scene: PIXI.Container\n\nconst grid = new PIXI.Graphics()\n  .beginFill(0xffffff, 0)\n  .drawRect(0, 0, width, height)\n  .endFill()\n\nfor (let i = 0; i < 25; i++) {\n  const x = i % 5\n  const y = i / 5 | 0\n\n  const txt = new PIXI.Text(`${i + 1}`, {\n    fontFamily: window.font,\n    fontSize: 42,\n    fill: Color.Blue\n  })\n\n  const dot = PIXI.Sprite.from(PIXI.Texture.WHITE)\n  dot.anchor.set(.5)\n  txt.addChild(dot)\n\n  txt.anchor.set(.5)\n  txt.position.set((.5 + x) * r, (.5 + y) * r)\n\n  grid.addChild(txt)\n}\n\nfunction init(grade: Grade) {\n  scene = new PIXI.Container()\n  stage.addChild(scene)\n\n  grid.pivot.set(width / 2, height / 2)\n  grid.position.set(screen.width / 2, screen.height / 2)\n\n  update(grade)\n  scene.addChild(grid)\n}\n\nfunction update(grade: Grade = 1) {\n  for (let i = 0; i < 25; i++) {\n    const j = i * grade\n    const txt = grid.children[i] as PIXI.Text\n    const ok = j <= store.colloc.level\n    txt.text =  ok ? `${j + 1}` : ''\n    if (ok) {\n      txt.text = `${j + 1}`\n      txt.children[0].visible = false\n    } else {\n      txt.text = ''\n      const dot = txt.children[0] as PIXI.Sprite\n      dot.visible = true\n      dot.texture = PIXI.Texture.from(`ui.dot.${['blue', 'pink', 'yellow'][grade - 1]}.png`)\n    }\n  }\n}\n\nexport function show(opts: {grade?: Grade} = {}) {\n  if (!scene) return init(opts.grade)\n  update(opts.grade)\n}\n\nexport function hide() {\n\n}\n\ntype Grade = 1 | 2 | 3\n"],"sourceRoot":""}